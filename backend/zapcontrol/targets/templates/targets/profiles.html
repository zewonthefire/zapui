{% extends "core/base.html" %}
{% block title %}Scan Profiles{% endblock %}
{% block content %}
<div class="row g-4">
  <div class="col-lg-5">
    <div class="card">
      <div class="card-body">
        <h2 class="h5">Create / Edit Profile</h2>
        <form method="post">
          {% csrf_token %}
          {% if form.instance.pk %}<input type="hidden" name="profile_id" value="{{ form.instance.pk }}">{% endif %}
          {{ form.as_p }}
          <button type="submit" class="btn btn-primary">Save profile</button>
        </form>
      </div>
    </div>
  </div>
  <div class="col-lg-7">
    <div class="card">
      <div class="card-body">
        <h2 class="h5">Profiles</h2>
        <table class="table table-sm">
          <thead><tr><th>Name</th><th>Type</th><th>Project</th><th>Node</th><th></th></tr></thead>
          <tbody>
            {% for profile in profiles %}
              <tr>
                <td>{{ profile.name }}</td>
                <td>{{ profile.get_scan_type_display }}</td>
                <td>{{ profile.project|default:"-" }}</td>
                <td>{{ profile.zap_node|default:"auto" }}</td>
                <td class="text-end">
                  <a href="?edit={{ profile.id }}" class="btn btn-outline-secondary btn-sm">Edit</a>
                  <form method="post" class="d-inline">
                    {% csrf_token %}
                    <input type="hidden" name="profile_id" value="{{ profile.id }}">
                    <button name="delete" value="1" class="btn btn-outline-danger btn-sm" onclick="return confirm('Delete profile?');">Delete</button>
                  </form>
                </td>
              </tr>
            {% empty %}
              <tr><td colspan="5" class="text-muted">No profiles yet.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
